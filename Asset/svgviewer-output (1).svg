<?xml version="1.0" encoding="UTF-8"?>
<svg width="600" height="160" viewBox="0 0 600 160" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title desc">
  <title id="title">Speech to Text Animation</title>
  <desc id="desc">A microphone with animated audio bars and typing text with a blinking caret indicating speech to text.</desc>

  <!-- Background (optional, transparent by default) -->
  <rect width="100%" height="100%" fill="none"/>

  <!-- Group all visuals; use currentColor so you can recolor via the <img> tag or CSS where allowed -->
  <g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" color="#4f46e5">

    <!-- Microphone icon (left) -->
    <g transform="translate(70,80)">
      <!-- Mic capsule -->
      <rect x="-14" y="-26" width="28" height="52" rx="14" fill="currentColor" opacity="0.15"/>
      <rect x="-12" y="-24" width="24" height="48" rx="12"/>
      <!-- Stem -->
      <line x1="0" y1="24" x2="0" y2="36"/>
      <!-- Base -->
      <path d="M -18 36 H 18"/>
      <!-- Bob animation -->
      <animateTransform attributeName="transform" type="translate"
                        values="70,78; 70,82; 70,78" dur="1.8s"
                        repeatCount="indefinite"/>
    </g>

    <!-- Audio equalizer bars (center) -->
    <g transform="translate(210,80)">
      <!-- Helper function: each bar animates height (via y & height) out of phase -->
      <!-- You can tweak bars by editing h1/h2 and delays -->
      <!-- Bar 1 -->
      <rect x="-90" width="8" y="-10" height="20" fill="currentColor" opacity="0.8" stroke="none">
        <animate attributeName="height" values="18;52;18" dur="1.2s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-9;-26;-9" dur="1.2s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 2 -->
      <rect x="-72" width="8" y="-16" height="32" fill="currentColor" opacity="0.7" stroke="none">
        <animate attributeName="height" values="28;64;28" dur="1.2s" begin="0.1s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-14;-32;-14" dur="1.2s" begin="0.1s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 3 -->
      <rect x="-54" width="8" y="-22" height="44" fill="currentColor" opacity="0.6" stroke="none">
        <animate attributeName="height" values="36;72;36" dur="1.2s" begin="0.2s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-20;-36;-20" dur="1.2s" begin="0.2s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 4 -->
      <rect x="-36" width="8" y="-28" height="56" fill="currentColor" opacity="0.55" stroke="none">
        <animate attributeName="height" values="48;84;48" dur="1.2s" begin="0.3s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-24;-42;-24" dur="1.2s" begin="0.3s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 5 (center) -->
      <rect x="-18" width="8" y="-32" height="64" fill="currentColor" opacity="0.5" stroke="none">
        <animate attributeName="height" values="56;96;56" dur="1.2s" begin="0.4s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-28;-48;-28" dur="1.2s" begin="0.4s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 6 -->
      <rect x="0" width="8" y="-28" height="56" fill="currentColor" opacity="0.55" stroke="none">
        <animate attributeName="height" values="48;84;48" dur="1.2s" begin="0.5s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-24;-42;-24" dur="1.2s" begin="0.5s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 7 -->
      <rect x="18" width="8" y="-22" height="44" fill="currentColor" opacity="0.6" stroke="none">
        <animate attributeName="height" values="36;72;36" dur="1.2s" begin="0.6s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-20;-36;-20" dur="1.2s" begin="0.6s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 8 -->
      <rect x="36" width="8" y="-16" height="32" fill="currentColor" opacity="0.7" stroke="none">
        <animate attributeName="height" values="28;64;28" dur="1.2s" begin="0.7s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-14;-32;-14" dur="1.2s" begin="0.7s" repeatCount="indefinite"/>
      </rect>
      <!-- Bar 9 -->
      <rect x="54" width="8" y="-10" height="20" fill="currentColor" opacity="0.8" stroke="none">
        <animate attributeName="height" values="18;52;18" dur="1.2s" begin="0.8s" repeatCount="indefinite"/>
        <animate attributeName="y"      values="-9;-26;-9" dur="1.2s" begin="0.8s" repeatCount="indefinite"/>
      </rect>
    </g>

    <!-- Typing text (right) -->
    <g transform="translate(380,88)" fill="currentColor" stroke="none">
      <!-- The text we will "reveal" via a widening mask -->
      <text x="0" y="0" font-size="20" font-family="ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji">
        Transcribing your speech…
      </text>

      <!-- Reveal mask -->
      <defs>
        <clipPath id="reveal">
          <rect x="0" y="-18" width="0" height="28">
            <!-- Animate width to mimic typing -->
            <animate attributeName="width" values="0; 240; 0; 240" keyTimes="0;0.45;0.5;1" dur="4s" repeatCount="indefinite"/>
          </rect>
        </clipPath>
      </defs>

      <!-- Text drawn again, clipped to reveal gradually -->
      <text x="0" y="0" font-size="20" clip-path="url(#reveal)"
            font-family="ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji">
        Transcribing your speech…
      </text>

      <!-- Blinking caret -->
      <rect x="246" y="-14" width="10" height="22" rx="2" fill="currentColor" opacity="1">
        <animate attributeName="opacity" values="1;0;1" dur="0.9s" repeatCount="indefinite" />
        <!-- Slide with the typing reveal -->
        <animate attributeName="x" values="6;246;6;246" keyTimes="0;0.45;0.5;1" dur="4s" repeatCount="indefinite"/>
      </rect>
    </g>

    <!-- Arrow hint (speech → text) -->
    <g transform="translate(150,80)">
      <path d="M 0 0 H 40"/>
      <path d="M 40 0 l -8 -6 M 40 0 l -8 6"/>
      <animate attributeName="opacity" values="0.35;0.85;0.35" dur="1.8s" repeatCount="indefinite"/>
    </g>
    <g transform="translate(325,80)">
      <path d="M 0 0 H 40"/>
      <path d="M 40 0 l -8 -6 M 40 0 l -8 6"/>
      <animate attributeName="opacity" values="0.35;0.85;0.35" dur="1.8s" begin="0.3s" repeatCount="indefinite"/>
    </g>
  </g>
</svg>
